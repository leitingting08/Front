<!DOCTYPE html>
<html>
<head>
	<title></title>
	 <meta charset="utf-8">
	 <style>
	 	.ancestors *
	 	{
	 		display: block;
	 		border: 2px solid lightgrey;
	 		color: lightgrey;
	 		padding: 5px;
	 		margin: 15px;
	 	}
	 </style>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script>
    $(document).ready(function(){
    	$("span").parentsUntil("div").css({"color":"red","border":"2px solid red"});
    });
    </script>
</head>
<body>
body (曾曾祖父)
<div class="ancestors">
  <div style="width: 500px;">div (曾祖父)
	<ul>ul (祖父)
	<li>li (直接父)
		<span>span</span>
	</li>
	</ul>
  </div>
</div>

</body>
</html>